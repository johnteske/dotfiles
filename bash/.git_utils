# GIT AUTO COMPLETION

if [ -f ~/.git-completion.bash ]; then
    source ~/.git-completion.bash
else
    echo "Git completion not found. Fetching..."
    curl -o ~/.git-completion.bash https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash && source ~/.git-completion.bash && echo "Git completion added."
fi

gp () {
  # TODO confirm before setting upstream
  git push || git push --set-upstream origin $(git rev-parse --abbrev-ref HEAD)
}

git-select () {
    # TODO also exclude current branch?
    git for-each-ref --format="%(refname:short)" refs/heads/\* | grep -v "master" | \
    while read -r line; do
        read -p "select branch: $line (y/N)?" answer </dev/tty;
        case "$answer" in
            y|Y) echo "$line";;
        esac;
    done # | xargs git branch -D
}
