# Git completion
[ -f ~/.git-completion.bash ] && source ~/.git-completion.bash

gp () {
    git push && return

    local answer
    echo -n "Do you want to push and set the remote as upstream? [Y/n] "
    read -r answer
    if [[ $answer != "n" ]] && [[ $answer != "N" ]]; then
        git push --set-upstream origin "$(git rev-parse --abbrev-ref HEAD)"
    fi
}

git-select () {
    current=$(git rev-parse --abbrev-ref HEAD)

    git for-each-ref --format="%(refname:short)" refs/heads/\* | \
    grep -v "master\|${current}" | \
    while read -r line; do
        read -p "select branch: $line (y/N)?" answer </dev/tty;
        case "$answer" in
            y|Y) echo "$line";;
        esac;
    done
}
